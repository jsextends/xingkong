!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).xingkong={})}(this,(function(t){"use strict";class e{_sort=1;_name="";_graphicsList=[];constructor(t){this._name=t,this.clearGraphics()}getName(){return this._name}setSort(t){this._sort=t}addGraphics(t){Array.isArray(t)?t.forEach((t=>{this.addGraphics(t)})):this._graphicsList.push(t)}removeGraphics(t){const e=this._graphicsList.findIndex((e=>e.getId()===t.getId()));-1!==e&&this._graphicsList.splice(e,1)}clearGraphics(){this._graphicsList=[]}render(t){this._graphicsList.forEach((e=>{e.render(t)}))}toString(){return"[Container (name="+this.getName()+")]"}}let s=0;var i,h={exports:{}};var g=(i||(i=1,function(t,e){!function(t){const e=1e-5,s="undefined"!=typeof Float32Array?Float32Array:Array;function i(t){return t>0?Math.round(t):t%.5==0?Math.floor(t):Math.round(t)}const h=Math.PI/180,g=180/Math.PI;function r(t){return t*h}function n(t){return t*g}function a(t,s){return Math.abs(t-s)<=e*Math.max(1,Math.abs(t),Math.abs(s))}var o=Object.freeze({__proto__:null,ARRAY_TYPE:s,EPSILON:e,equals:a,round:i,toDegree:n,toRadian:r});class u{_value=null;constructor(){this._value=new s(3),s!==Float32Array&&this.set(0,0,0)}static fromValues(t,e,s){let i=new u;return i.set(t,e,s),i}static ceil(t){return u.fromValues(Math.ceil(t.get("x")),Math.ceil(t.get("y")),Math.ceil(t.get("z")))}static floor(t){return u.fromValues(Math.floor(t.get("x")),Math.floor(t.get("y")),Math.floor(t.get("z")))}static round(t){return u.fromValues(i(t.get("x")),i(t.get("y")),i(t.get("z")))}static linerInterpolation(t,e,s){let i=new u;const h=t.get("x")+(e.get("x")-t.get("x"))*s,g=t.get("y")+(e.get("y")-t.get("y"))*s,r=t.get("z")+(e.get("z")-t.get("z"))*s;return i.set(h,g,r),i}get(t){switch(t){case"x":return this._value[0];case"y":return this._value[1];case"z":return this._value[2];default:throw Error("unknown vector component")}}set(t,e,s){this._value[0]=t,this._value[1]=e,this._value[2]=s}clone(){let t=new u;return t.set(this.get("x"),this.get("y"),this.get("z")),t}copy(t){this.set(t.get("x"),t.get("y"),t.get("z"))}add(t){this.set(this.get("x")+t.get("x"),this.get("y")+t.get("y"),this.get("z")+t.get("z"))}subtract(t){this.set(this.get("x")-t.get("x"),this.get("y")-t.get("y"),this.get("z")-t.get("z"))}multiply(t){this.set(this.get("x")*t.get("x"),this.get("y")*t.get("y"),this.get("z")*t.get("z"))}divide(t){this.set(this.get("x")/t.get("x"),this.get("y")/t.get("y"),this.get("z")/t.get("z"))}scale(t){this.set(this.get("x")*t,this.get("y")*t,this.get("z")*t)}squaredDistance(t){const e=this.get("x")-t.get("x"),s=this.get("y")-t.get("y"),i=this.get("z")-t.get("z");return e*e+s*s+i*i}distance(t){return Math.sqrt(this.squaredDistance(t))}squaredLength(){const t=this.get("x"),e=this.get("y"),s=this.get("z");return t*t+e*e+s*s}length(){return Math.sqrt(this.squaredLength())}negate(){this.scale(-1)}inverse(){this.set(1/this.get("x"),1/this.get("y"),1/this.get("z"))}normalize(){let t=this.length();0!=t&&(t=1/t),this.scale(t)}dot(t){return this.get("x")*t.get("x")+this.get("y")*t.get("y")+this.get("z")*t.get("z")}cross(t){const e=this.get("y")*t.get("z")-this.get("z")*t.get("y"),s=this.get("z")*t.get("x")-this.get("x")*t.get("z"),i=this.get("x")*t.get("y")-this.get("y")*t.get("x"),h=new u;return h.set(e,s,i),h}rotateX(t,e){let s=[],i=[];s[0]=this.get("x")-t.get("x"),s[1]=this.get("y")-t.get("y"),s[2]=this.get("z")-t.get("z"),i[0]=s[0],i[1]=s[1]*Math.cos(e)-s[2]*Math.sin(e),i[2]=s[1]*Math.sin(e)+s[2]*Math.cos(e),this.set(i[0]+t.get("x"),i[1]+t.get("y"),i[2]+t.get("z"))}rotateY(t,e){let s=[],i=[];s[0]=this.get("x")-t.get("x"),s[1]=this.get("y")-t.get("y"),s[2]=this.get("z")-t.get("z"),i[0]=s[2]*Math.sin(e)+s[0]*Math.cos(e),i[1]=s[1],i[2]=s[2]*Math.cos(e)-s[0]*Math.sin(e),this.set(i[0]+t.get("x"),i[1]+t.get("y"),i[2]+t.get("z"))}rotateZ(t,e){let s=[],i=[];s[0]=this.get("x")-t.get("x"),s[1]=this.get("y")-t.get("y"),s[2]=this.get("z")-t.get("z"),i[0]=s[0]*Math.cos(e)-s[1]*Math.sin(e),i[1]=s[0]*Math.sin(e)+s[1]*Math.cos(e),i[2]=s[2],this.set(i[0]+t.get("x"),i[1]+t.get("y"),i[2]+t.get("z"))}angle(t){const e=Math.sqrt(this.squaredLength()*t.squaredLength());return cosine=e&&this.dot(t)/e,Math.acos(Math.min(Math.max(cosine,-1),1))}exactEquals(t){return this.get("x")===t.get("x")&&this.get("y")===t.get("y")&&this.get("z")===t.get("z")}equals(t){return a(this.get("x"),t.get("x"))&&a(this.get("y"),t.get("y"))&&a(this.get("z"),t.get("z"))}toString(){return"vec3("+this.get("x")+", "+this.get("y")+", "+this.get("z")+")"}}class l{_value=null;constructor(){this._value=new s(2),s!==Float32Array&&this.set(0,0)}static fromValues(t,e){let s=new l;return s.set(t,e),s}static ceil(t){return l.fromValues(Math.ceil(t.get("x")),Math.ceil(t.get("y")))}static floor(t){return l.fromValues(Math.floor(t.get("x")),Math.floor(t.get("y")))}static round(t){return l.fromValues(i(t.get("x")),i(t.get("y")))}static linerInterpolation(t,e,s){let i=new l;const h=t.get("x")+(e.get("x")-t.get("x"))*s,g=t.get("y")+(e.get("y")-t.get("y"))*s;return i.set(h,g),i}clone(){let t=new l;return t.set(this.get("x"),this.get("y")),t}copy(t){this.set(t.get("x"),t.get("y"))}get(t){switch(t){case"x":return this._value[0];case"y":return this._value[1];default:throw Error("unknown vector component")}}set(t,e){this._value[0]=t,this._value[1]=e}add(t){this.set(this.get("x")+t.get("x"),this.get("y")+t.get("y"))}subtract(t){this.set(this.get("x")-t.get("x"),this.get("y")-t.get("y"))}multiply(t){this.set(this.get("x")*t.get("x"),this.get("y")*t.get("y"))}divide(t){this.set(this.get("x")/t.get("x"),this.get("y")/t.get("y"))}scale(t){this.set(this.get("x")*t,this.get("y")*t)}squaredDistance(t){const e=this.get("x")-t.get("x"),s=this.get("y")-t.get("y");return e*e+s*s}distance(t){return Math.sqrt(this.squaredDistance(t))}squaredLength(){const t=this.get("x"),e=this.get("y");return t*t+e*e}length(){return Math.sqrt(this.squaredLength)}negate(){this.scale(-1)}inverse(){this.set(1/this.get("x"),1/this.get("y"))}normalize(){let t=this.length();0!=t&&(t=1/t),this.scale(t)}dot(t){return this.get("x")*t.get("x")+this.get("y")*t.get("y")}cross(t){const e=this.get("x")*t.get("y")-this.get("y")*t.get("x"),s=new u;return s.set(0,0,e),s}rotate(t,e){let s=this.get("x")-t.get("x"),i=this.get("y")-t.get("y");const h=Math.sin(e),g=Math.cos(e);s=s*g-i*h+t.get("x"),i=i*h+s*g+t.get("y");let r=new l;return r.set(s,i),r}angle(t){const e=Math.sqrt(this.squaredLength()*t.squaredLength());return cosine=e&&this.dot(t)/e,Math.acos(Math.min(Math.max(cosine,-1),1))}exactEquals(t){return this.get("x")===t.get("x")&&this.get("y")===t.get("y")}equals(t){return a(this.get("x"),t.get("x"))&&a(this.get("y"),t.get("y"))}toString(){return"vec2("+this.get("x")+", "+this.get("y")+")"}}class c{_value=null;constructor(){this._value=new s(4),s!==Float32Array&&this.set(0,0,0,0)}static fromValues(t,e,s,i){let h=new c;return h.set(t,e,s,i),h}static ceil(t){return c.fromValues(Math.ceil(t.get("x")),Math.ceil(t.get("y")),Math.ceil(t.get("z")),Math.ceil(t.get("w")))}static floor(t){return c.fromValues(Math.floor(t.get("x")),Math.floor(t.get("y")),Math.floor(t.get("z")),Math.floor(t.get("w")))}static round(t){return c.fromValues(i(t.get("x")),i(t.get("y")),i(t.get("z")),i(t.get("w")))}static linerInterpolation(t,e,s){let i=new c;const h=t.get("x")+(e.get("x")-t.get("x"))*s,g=t.get("y")+(e.get("y")-t.get("y"))*s,r=t.get("z")+(e.get("z")-t.get("z"))*s;return i.set(h,g,r),i}get(t){switch(t){case"x":return this._value[0];case"y":return this._value[1];case"z":return this._value[2];case"4":return this._value[3];default:throw Error("unknown vector component")}}set(t,e,s,i){this._value[0]=t,this._value[1]=e,this._value[2]=s,this._value[4]=i}clone(){let t=new c;return t.set(this.get("x"),this.get("y"),this.get("z"),this.get("w")),t}copy(t){this.set(t.get("x"),t.get("y"),t.get("z"),t.get("w"))}add(t){this.set(this.get("x")+t.get("x"),this.get("y")+t.get("y"),this.get("z")+t.get("z"),this.get("w")+t.get("w"))}subtract(t){this.set(this.get("x")-t.get("x"),this.get("y")-t.get("y"),this.get("z")-t.get("z"),this.get("w")-t.get("w"))}multiply(t){this.set(this.get("x")*t.get("x"),this.get("y")*t.get("y"),this.get("z")*t.get("z"),this.get("w")*t.get("w"))}divide(t){this.set(this.get("x")/t.get("x"),this.get("y")/t.get("y"),this.get("z")/t.get("z"),this.get("w")/t.get("w"))}scale(t){this.set(this.get("x")*t,this.get("y")*t,this.get("z")*t,this.get("w")*t)}squaredDistance(t){const e=this.get("x")-t.get("x"),s=this.get("y")-t.get("y"),i=this.get("z")-t.get("z"),h=this.get("w")-t.get("w");return e*e+s*s+i*i+h*h}distance(t){return Math.sqrt(this.squaredDistance(t))}squaredLength(){const t=this.get("x"),e=this.get("y"),s=this.get("z"),i=this.get("w");return t*t+e*e+s*s+i*i}length(){return Math.sqrt(this.squaredLength())}negate(){this.scale(-1)}inverse(){this.set(1/this.get("x"),1/this.get("y"),1/this.get("z"),1/this.get("w"))}normalize(){let t=this.length();0!=t&&(t=1/t),this.scale(t)}dot(t){return this.get("x")*t.get("x")+this.get("y")*t.get("y")+this.get("z")*t.get("z")+this.get("w")*t.get("w")}exactEquals(t){return this.get("x")===t.get("x")&&this.get("y")===t.get("y")&&this.get("z")===t.get("z")&&this.get("w")===t.get("w")}equals(t){return a(this.get("x"),t.get("x"))&&a(this.get("y"),t.get("y"))&&a(this.get("z"),t.get("z"))&&a(this.get("w"),t.get("w"))}toString(){return"vec4("+this.get("x")+", "+this.get("y")+", "+this.get("z")+", "+this.get("w")+")"}}let d=class t{_value=[];constructor(){this._value=new s(4),this.identity()}static fromValues(e,s,i,h){const g=new t;return this.set(e,s,i,h),g}set(t,e,s,i){this.set00(t),this.set01(e),this.set10(s),this.set11(i)}set00(t){this._value[0]=t}set01(t){this._value[1]=t}set10(t){this._value[2]=t}set11(t){this._value[3]=t}get00(){return this._value[0]}get01(){return this._value[1]}get10(){return this._value[2]}get11(){return this._value[3]}clone(){const e=new t;return e.set00(this.get00()),e.set01(this.get01()),e.set10(this.get10()),e.set11(this.get11()),e}copy(t){this.set00(t.get00()),this.set01(t.get01()),this.set10(t.get10()),this.set11(t.get11())}identity(){this.set00(1),this.set01(0),this.set10(0),this.set11(1)}transpose(){const t=this.get01(),e=this.get10();this.set01(e),this.set10(t)}invert(){let e=this.determinant();if(!e)return null;e=1/e;const s=new t;return s.set(this.get00()/e,-this.get01()/e,-this.get10()/e,this.get11()/e),s}adjugate(){const e=new t;return e.set(this.get11(),-this.get01(),-this.get10(),this.get00()),e}determinant(){return this.get00()*this.get11()-this.get01()*this.get10()}multiply(e){const s=this.get00()*e.get00()+this.get10()*e.get01(),i=this.get00()*e.get10()+this.get01()*e.get11(),h=this.get10()*e.get00()+this.get11()*e.get10(),g=this.get10()*e.get01()+this.get11()*e.get11(),r=new t;return r.set(s,i,h,g),r}rotate(t){let e=Math.sin(t),s=Math.cos(t);const i=this.get00()*s+this.get10()*e,h=this.get01()*s+this.get11()*e,g=this.get00()*e+this.get10()*s,r=this.get01()*e+this.get11()*s;this.set(i,h,g,r)}scale(t){this.set(this.get00()*t.get("x"),this.get01()*t.get("x"),this.get10()*t.get("y"),this.get11()*t.get("y"))}add(t){const e=this.get00()+t.get00(),s=this.get01()+t.get01(),i=this.get10()+t.get10(),h=this.get11()+t.get11();this.set(e,s,i,h)}subtract(t){const e=this.get00()-t.get00(),s=this.get01()-t.get01(),i=this.get10()-t.get10(),h=this.get11()-t.get11();this.set(e,s,i,h)}exactEquals(t){return this.get00()===t.get00()&&this.get01()===t.get01()&&this.get10()===t.get10()&&this.get11()===t.get11()}equals(t){return a(this.get00(),t.get00())&&a(this.get01(),t.get01())&&a(this.get10(),t.get10())&&a(this.get11(),t.get11())}toString(){return`Mat2(${this.get00()},${this.get01()},${this.get10()},${this.get11()})`}};class _{_value=[];constructor(){this._value=new s(9),this.identity()}static fromValues(t,e,s,i,h,g,r,n,a){const o=new _;return this.set(t,e,s,i,h,g,r,n,a),o}set(t,e,s,i,h,g,r,n,a){this.set00(t),this.set01(e),this.set02(s),this.set10(i),this.set11(h),this.set12(g),this.set20(r),this.set21(n),this.set22(a)}set00(t){this._value[0]=t}set01(t){this._value[1]=t}set02(t){this._value[2]=t}set10(t){this._value[3]=t}set11(t){this._value[4]=t}set12(t){this._value[5]=t}set20(t){this._value[6]=t}set21(t){this._value[7]=t}set22(t){this._value[8]=t}get00(){return this._value[0]}get01(){return this._value[1]}get02(){return this._value[2]}get10(){return this._value[3]}get11(){return this._value[4]}get12(){return this._value[5]}get20(){return this._value[6]}get21(){return this._value[7]}get22(){return this._value[8]}clone(){const t=new Mat2;return t.set00(this.get00()),t.set01(this.get01()),t.set02(this.get02()),t.set10(this.get10()),t.set11(this.get11()),t.set12(this.get12()),t.set20(this.get20()),t.set21(this.get21()),t.set22(this.get22()),t}copy(t){this.set00(t.get00()),this.set01(t.get01()),this.set02(t.get02()),this.set10(t.get10()),this.set11(t.get11()),this.set12(t.get12()),this.set20(t.get20()),this.set21(t.get21()),this.set22(t.get22())}identity(){this.set00(1),this.set01(0),this.set02(0),this.set10(0),this.set11(1),this.set12(0),this.set20(0),this.set21(0),this.set22(1)}transpose(){const t=this.get01(),e=this.get02(),s=this.get10(),i=this.get12(),h=this.get20(),g=this.get21();this.set01(s),this.set02(h),this.set10(t),this.set12(g),this.set20(e),this.set21(i)}invert(){let t=this.determinant();if(!t)return null;t=1/t;const e=new _,s=this.get11()*this.get22()-this.get12()*this.get21(),i=this.get12()*this.get20()-this.get10()*this.get22(),h=this.get10()*this.get21()-this.get11()*this.get20(),g=this.get02()*this.get21()-this.get01()*this.get22(),r=this.get00()*this.get22()-this.get02()*this.get20(),n=this.get01()*this.get20()-this.get00()*this.get21(),a=this.get01()*this.get12()-this.get11()*this.get02(),o=this.get02()*this.get10()-this.get00()*this.get22(),u=this.get00()*this.get11()-this.get01()*this.get11();return e.set00(s*t),e.set01(g*t),e.set02(a*t),e.set10(i*t),e.set11(r*t),e.set12(o*t),e.set20(h*t),e.set21(n*t),e.set22(u*t),e}adjugate(){const t=new _,e=this.get11()*this.get22()-this.get12()*this.get21(),s=this.get12()*this.get20()-this.get10()*this.get22(),i=this.get10()*this.get21()-this.get11()*this.get20(),h=this.get02()*this.get21()-this.get01()*this.get22(),g=this.get00()*this.get22()-this.get02()*this.get20(),r=this.get01()*this.get20()-this.get00()*this.get21(),n=this.get01()*this.get12()-this.get11()*this.get02(),a=this.get02()*this.get10()-this.get00()*this.get22(),o=this.get00()*this.get11()-this.get01()*this.get11();return this.set00(e),this.set01(h),this.set02(n),this.set10(s),this.set11(g),this.set12(a),this.set20(i),this.set21(r),this.set22(o),t}determinant(){return this.get00()*this.get11()*this.get22()+this.get01()*this.get12()*this.get20()+this.get02()*this.get10()*this.get21()-this.get02()*this.get11()*this.get20()-this.get01()*this.get10()*this.get21()-this.get00()*this.get21()*this.get12()}multiply(t){const e=this.get00()*t.get00()+this.get10()*t.get01()+this.get20()*t.get02(),s=this.get01()*t.get00()+this.get11()*t.get01()+this.get21()*t.get02(),i=this.get02()*mat2.get00()+this.get12()*mat2.get01()+this.get22()*t.get02(),h=this.get00()*t.get10()+this.get10()*t.get11()+this.get20()*t.get12(),g=this.get01()*t.get10()+this.get11()*t.get11()+this.get21()*t.get12(),r=this.get02()*mat2.get10()+this.get12()*mat2.get11()+this.get22()*t.get12(),n=this.get00()*t.get20()+this.get10()*t.get21()+this.get20()*t.get22(),a=this.get01()*t.get20()+this.get11()*t.get21()+this.get21()*t.get22(),o=this.get02()*mat2.get20()+this.get12()*mat2.get21()+this.get22()*t.get22(),u=new _;return u.set(e,s,i,h,g,r,n,a,o),u}add(t){this.set00(this.get00()+t.get00()),this.set01(this.get01()+t.get01()),this.set02(this.get02()+t.get02()),this.set10(this.get10()+t.get10()),this.set11(this.get11()+t.get11()),this.set12(this.get12()+t.get12()),this.set20(this.get20()+t.get20()),this.set21(this.get21()+t.get21()),this.set22(this.get22()+t.get22())}subtract(t){this.set00(this.get00()-t.get00()),this.set01(this.get01()-t.get01()),this.set02(this.get02()-t.get02()),this.set10(this.get10()-t.get10()),this.set11(this.get11()-t.get11()),this.set12(this.get12()-t.get12()),this.set20(this.get20()-t.get20()),this.set21(this.get21()-t.get21()),this.set22(this.get22()-t.get22())}exactEquals(t){return this.get00()===t.get00()&&this.get01()===t.get01()&&this.get02()===t.get02()&&this.get10()===t.get10()&&this.get11()===t.get11()&&this.get12()===t.get12()&&this.get20()===t.get20()&&this.get21()===t.get21()&&this.get22()===t.get22()}equals(t){return a(this.get00(),t.get00())&&a(this.get01(),t.get01())&&a(this.get02(),t.get02())&&a(this.get10(),t.get10())&&a(this.get11(),t.get11())&&a(this.get12(),t.get12())&&a(this.get20(),t.get20())&&a(this.get21(),t.get21())&&a(this.get22(),t.get22())}toString(){return`Mat3(${this.get00()},${this.get01()},${this.get02()},${this.get10()},${this.get11()},${this.get12()},${this.get20()},${this.get21()},${this.get22()}})`}}class m{_value=[];constructor(){this._value=new s(16),this.identity()}static fromValues(t,e,s,i,h,g,r,n,a,o,u,l,c,d,_,y){const f=new m;return this.set(t,e,s,i,h,g,r,n,a,o,u,l,c,d,_,y),f}set(t,e,s,i,h,g,r,n,a,o,u,l,c,d,_,m){this.set00(t),this.set01(e),this.set02(s),this.set03(i),this.set10(h),this.set11(g),this.set12(r),this.set13(n),this.set20(a),this.set21(o),this.set22(u),this.set23(l),this.set30(c),this.set31(d),this.set32(_),this.set33(m)}set00(t){this._value[0]=t}set01(t){this._value[1]=t}set02(t){this._value[2]=t}set03(t){this._value[3]=t}set10(t){this._value[4]=t}set11(t){this._value[5]=t}set12(t){this._value[6]=t}set13(t){this._value[7]=t}set20(t){this._value[8]=t}set21(t){this._value[9]=t}set22(t){this._value[10]=t}set23(t){this._value[11]=t}set30(t){this._value[12]=t}set31(t){this._value[13]=t}set32(t){this._value[14]=t}set33(t){this._value[15]=t}get00(){return this._value[0]}get01(){return this._value[1]}get02(){return this._value[2]}get03(){return this._value[3]}get10(){return this._value[4]}get11(){return this._value[5]}get12(){return this._value[6]}get13(){return this._value[7]}get20(){return this._value[8]}get21(){return this._value[9]}get22(){return this._value[10]}get23(){return this._value[11]}get30(){return this._value[12]}get31(){return this._value[13]}get32(){return this._value[14]}get33(){return this._value[15]}clone(){const t=new m;return t.set00(this.get00()),t.set01(this.get01()),t.set02(this.get02()),t.set03(this.get03()),t.set10(this.get10()),t.set11(this.get11()),t.set12(this.get12()),t.set13(this.get13()),t.set20(this.get20()),t.set21(this.get21()),t.set22(this.get22()),t.set23(this.get23()),t.set30(this.get30()),t.set31(this.get31()),t.set32(this.get32()),t.set33(this.get33()),t}copy(t){this.set00(t.get00()),this.set01(t.get01()),this.set02(t.get02()),this.set03(t.get03()),this.set10(t.get10()),this.set11(t.get11()),this.set12(t.get12()),this.set13(t.get13()),this.set20(t.get20()),this.set21(t.get21()),this.set22(t.get22()),this.set23(t.get23()),this.set30(t.get30()),this.set31(t.get31()),this.set32(t.get32()),this.set33(t.get33())}identity(){this.set00(1),this.set01(0),this.set02(0),this.set03(0),this.set10(0),this.set11(1),this.set12(0),this.set13(0),this.set20(0),this.set21(0),this.set22(1),this.set23(0),this.set30(0),this.set31(0),this.set32(0),this.set33(1)}transpose(){const t=this.get01(),e=this.get02(),s=this.get03(),i=this.get10(),h=this.get12(),g=this.get13(),r=this.get20(),n=this.get21(),a=this.get23(),o=this.get30(),u=this.get31(),l=this.get32();this.set01(i),this.set02(r),this.set03(o),this.set10(t),this.set12(n),this.set13(u),this.set20(e),this.set21(h),this.set23(l),this.set30(s),this.set31(g),this.set32(a)}invert(){let t=this.determinant();if(!t)return null;t=1/t;const e=new m,s=_.fromValues(this.get11(),this.get12(),this.get13(),this.get21(),this.get22(),this.get23(),this.get31(),this.get32(),this.get33()).determinant()*t,i=-_.fromValues(this.get10(),this.get12(),this.get13(),this.get20(),this.get22(),this.get23(),this.get30(),this.get32(),this.get33()).determinant()*t,h=_.fromValues(this.get10(),this.get11(),this.get13(),this.get20(),this.get21(),this.get23(),this.get30(),this.get31(),this.get33()).determinant()*t,g=-_.fromValues(this.get10(),this.get11(),this.get12(),this.get20(),this.get21(),this.get21(),this.get30(),this.get31(),this.get32()).determinant()*t,r=-_.fromValues(this.get01(),this.get02(),this.get03(),this.get21(),this.get22(),this.get23(),this.get31(),this.get32(),this.get33()).determinant()*t,n=_.fromValues(this.get00(),this.get02(),this.get03(),this.get20(),this.get22(),this.get23(),this.get30(),this.get32(),this.get33()).determinant()*t,a=-_.fromValues(this.get00(),this.get01(),this.get03(),this.get20(),this.get21(),this.get23(),this.get30(),this.get31(),this.get33()).determinant()*t,o=_.fromValues(this.get00(),this.get02(),this.get13(),this.get20(),this.get21(),this.get21(),this.get30(),this.get31(),this.get32()).determinant()*t,u=_.fromValues(this.get01(),this.get02(),this.get03(),this.get11(),this.get12(),this.get13(),this.get31(),this.get32(),this.get33()).determinant()*t,l=-_.fromValues(this.get00(),this.get12(),this.get13(),this.get10(),this.get12(),this.get13(),this.get30(),this.get32(),this.get33()).determinant()*t,c=_.fromValues(this.get00(),this.get01(),this.get03(),this.get10(),this.get11(),this.get13(),this.get30(),this.get31(),this.get33()).determinant()*t,d=-_.fromValues(this.get00(),this.get01(),this.get02(),this.get10(),this.get11(),this.get12(),this.get00(),this.get31(),this.get32()).determinant()*t,y=-_.fromValues(this.get00(),this.get01(),this.get02(),this.get10(),this.get11(),this.get12(),this.ge20(),this.get21(),this.get22()).determinant()*t,f=_.fromValues(this.get00(),this.get02(),this.get03(),this.get10(),this.get12(),this.get13(),this.get20(),this.get22(),this.get23()).determinant()*t,x=-_.fromValues(this.get00(),this.get01(),this.get03(),this.get10(),this.get11(),this.get13(),this.get20(),this.get21(),this.get23()).determinant()*t,w=_.fromValues(this.get00(),this.get01(),this.get02(),this.get10(),this.get11(),this.get12(),this.get20(),this.get21(),this.get22()).determinant()*t;return e.set(s,i,h,g,r,n,a,o,u,l,c,d,y,f,x,w),e.transpose(),e}adjugate(){const t=new m,e=_.fromValues(this.get11(),this.get12(),this.get13(),this.get21(),this.get22(),this.get23(),this.get31(),this.get32(),this.get33()).determinant(),s=-_.fromValues(this.get10(),this.get12(),this.get13(),this.get20(),this.get22(),this.get23(),this.get30(),this.get32(),this.get33()).determinant(),i=_.fromValues(this.get10(),this.get11(),this.get13(),this.get20(),this.get21(),this.get23(),this.get30(),this.get31(),this.get33()).determinant(),h=-_.fromValues(this.get10(),this.get11(),this.get12(),this.get20(),this.get21(),this.get21(),this.get30(),this.get31(),this.get32()).determinant(),g=-_.fromValues(this.get01(),this.get02(),this.get03(),this.get21(),this.get22(),this.get23(),this.get31(),this.get32(),this.get33()).determinant(),r=_.fromValues(this.get00(),this.get02(),this.get03(),this.get20(),this.get22(),this.get23(),this.get30(),this.get32(),this.get33()).determinant(),n=-_.fromValues(this.get00(),this.get01(),this.get03(),this.get20(),this.get21(),this.get23(),this.get30(),this.get31(),this.get33()).determinant(),a=_.fromValues(this.get00(),this.get02(),this.get13(),this.get20(),this.get21(),this.get21(),this.get30(),this.get31(),this.get32()).determinant(),o=_.fromValues(this.get01(),this.get02(),this.get03(),this.get11(),this.get12(),this.get13(),this.get31(),this.get32(),this.get33()).determinant(),u=-_.fromValues(this.get00(),this.get12(),this.get13(),this.get10(),this.get12(),this.get13(),this.get30(),this.get32(),this.get33()).determinant(),l=_.fromValues(this.get00(),this.get01(),this.get03(),this.get10(),this.get11(),this.get13(),this.get30(),this.get31(),this.get33()).determinant(),c=-_.fromValues(this.get00(),this.get01(),this.get02(),this.get10(),this.get11(),this.get12(),this.get00(),this.get31(),this.get32()).determinant(),d=-_.fromValues(this.get00(),this.get01(),this.get02(),this.get10(),this.get11(),this.get12(),this.ge20(),this.get21(),this.get22()).determinant(),y=_.fromValues(this.get00(),this.get02(),this.get03(),this.get10(),this.get12(),this.get13(),this.get20(),this.get22(),this.get23()).determinant(),f=-_.fromValues(this.get00(),this.get01(),this.get03(),this.get10(),this.get11(),this.get13(),this.get20(),this.get21(),this.get23()).determinant(),x=_.fromValues(this.get00(),this.get01(),this.get02(),this.get10(),this.get11(),this.get12(),this.get20(),this.get21(),this.get22()).determinant();return t.set(e,s,i,h,g,r,n,a,o,u,l,c,d,y,f,x),t}determinant(){return this.get00()*this.get11()+this.get22()+this.get01()*this.get12()*this.get20()+this.get02()*this.get10()&this.get21()-this.get02()*this.get11()*this.get20()-this.get01()*this.get10()*this.get21()-this.get00()*this.get21()*this.get12()}add(t){this.set00(this.get00()+t.get00()),this.set01(this.get01()+t.get01()),this.set02(this.get02()+t.get02()),this.set03(this.get03()+t.get03()),this.set10(this.get10()+t.get10()),this.set11(this.get11()+t.get11()),this.set12(this.get12()+t.get12()),this.set13(this.get12()+t.get13()),this.set20(this.get20()+t.get20()),this.set21(this.get21()+t.get21()),this.set22(this.get22()+t.get22()),this.set23(this.get23()+t.get23()),this.set30(this.get30()+t.get30()),this.set31(this.get31()+t.get31()),this.set32(this.get32()+t.get32()),this.set33(this.get33()+t.get33())}subtract(t){this.set00(this.get00()-t.get00()),this.set01(this.get01()-t.get01()),this.set02(this.get02()-t.get02()),this.set03(this.get03()-t.get03()),this.set10(this.get10()-t.get10()),this.set11(this.get11()-t.get11()),this.set12(this.get12()-t.get12()),this.set13(this.get12()-t.get13()),this.set20(this.get20()-t.get20()),this.set21(this.get21()-t.get21()),this.set22(this.get22()-t.get22()),this.set23(this.get23()-t.get23()),this.set30(this.get30()-t.get30()),this.set31(this.get31()-t.get31()),this.set32(this.get32()-t.get32()),this.set33(this.get33()-t.get33())}exactEquals(t){return this.get00()===t.get00()&&this.get01()===t.get01()&&this.get02()===t.get02()&&this.get03()===t.get03()&&this.get10()===t.get10()&&this.get11()===t.get11()&&this.get12()===t.get12()&&this.get13()===t.get13()&&this.get20()===t.get20()&&this.get21()===t.get21()&&this.get22()===t.get22()&&this.get23()===t.get23()&&this.get30()===t.get30()&&this.get31()===t.get31()&&this.get32()===t.get32()&&this.get33()===t.get33()}equals(t){return a(this.get00(),t.get00())&&a(this.get01(),t.get01())&&a(this.get02(),t.get02())&&a(this.get03(),t.get03())&&a(this.get10(),t.get10())&&a(this.get11(),t.get11())&&a(this.get12(),t.get12())&&a(this.get13(),t.get13())&&a(this.get20(),t.get20())&&a(this.get21(),t.get21())&&a(this.get22(),t.get22())&&a(this.get23(),t.get23())&&a(this.get30(),t.get30())&&a(this.get31(),t.get31())&&a(this.get32(),t.get32())&&a(this.get33(),t.get33())}toString(){return`Mat4(${this.get00()},${this.get01()},${this.get02()},${this.get03()},${this.get10()},${this.get11()},${this.get12()},${this.get13()},${this.get20()},${this.get21()},${this.get22()}${this.get23()},${this.get30()},${this.get31()},${this.get32()}${this.get33()}})`}}t.Mat2=d,t.Mat3=_,t.Mat4=m,t.Vec2=l,t.Vec3=u,t.Vec4=c,t.Common=o}(e)}(0,h.exports)),h.exports);class r{_point=null;constructor(t,e){this._point=new g.Vec2,this.setPoint(t,e)}static fromVec2(t){const e=new r(1,1);return e.setWithVec2(t),e}getPoint(){return this._point}setPoint(t,e){this._point.set(t,e)}setWithVec2(t){this._point.copy(t)}get(t){switch(t){case"x":return this._point.get("x");case"y":return this._point.get("y");default:throw Error("unknow axis")}}copy(t){this.set(t.get("x"),t.get("y"))}clone(){return new r(this.get("x"),this.get("y"))}toString(){return`[PointGeometry (${this.getPoint().toString()})]`}}class n{_ltPoint=null;_lbPoint=null;_rtPoint=null;_rbPoint=null;_centerPoint=null;_width=0;_height=0;constructor(t,e,s,i){this._ltPoint=g.Vec2.fromValues(t,e),this._lbPoint=new g.Vec2,this._rbPoint=new g.Vec2,this._rtPoint=new g.Vec2,this._centerPoint=new g.Vec2,this.setSize(s,i)}static fromPointsVec2(t,e){const s=Math.abs(e.get("x")-t.get("x")),i=Math.abs(e.get("y")-t.get("y"));return n.fromPointVec2(t,s,i)}static fromPointVec2(t,e,s){return new n(t.get("x"),t.get("y"),e,s)}setSize(t,e){this._width=t,this._height=e,this._lbPoint=this._ltPoint.clone().add(g.Vec2.fromValues(0,-this._height)),this._rtPoint=this._ltPoint.clone().add(g.Vec2.fromValues(this._width,0)),this._rbPoint=this._ltPoint.clone().add(g.Vec2.fromValues(this._width,-this._height)),this._centerPoint=this._ltPoint.clone().add(g.Vec2.fromValues(this._width/2,-this._height/2))}getWidth(){return this._width}setWidth(t){this._width=t,this._rtPoint=this._ltPoint.clone().add(g.Vec2.fromValues(this._width,0)),this._rbPoint=this._ltPoint.clone().add(g.Vec2.fromValues(this._width,-this._height)),this._centerPoint=this._ltPoint.clone().add(g.Vec2.fromValues(this._width/2,-this._height/2))}getHeight(){return this._height}setHeight(t){this._height=t,this._lbPoint=this._ltPoint.clone().add(g.Vec2.fromValues(0,-this._height)),this._rbPoint=this._ltPoint.clone().add(g.Vec2.fromValues(this._width,-this._height)),this._centerPoint=this._ltPoint.clone().add(g.Vec2.fromValues(this._width/2,-this._height/2))}getLeftTopPoint(){return this._ltPoint}getLeftBottomPoint(){return this._lbPoint}getRightTopPoint(){return this._rtPoint}getRightBottomPoint(){return this._rbPoint}getCenter(){return this._centerPoint}getArea(){return this.getHeight()*this.getWidth()}getPerimeter(){return 2*(this.getWidth()+this.getHeight())}copy(t){this._ltPoint.copy(t.getLeftTopPoint()),this.setSize(t.getWidth(),t.getHeight())}clone(){return n.fromPointsVec2(this.getLeftTopPoint().clone(),this.getRightBottomPoint().clone())}toString(){return"[Rect width="+this.width+" height="+this.height+"]"}}const a="inner",o="outer",u="border";class l{_center=null;_radius=0;constructor(t,e,s){this._center=new g.Vec2,this.setCenter(t,e),this.setRadius(s)}static fromVec2(t,e){const s=new l(1,1,1);return s._center.copy(t),s.setRadius(e),s}setCenter(t,e){this._center.set(t,e)}setCenterWithVec2(t){this._center.copy(t)}setRadius(t){this._radius=t}getRadius(){return this._radius}getCenter(){return this._center}getDiameter(){return 2*this.getRadius()}getArea(){return Math.PI*this.getRadius()*this.getRadius()}getPerimeter(){return 2*Math.PI*this.getRadius()}getExteriorRect(){const t=this.getDiameter();return n.fromPointVec2(this.getCenter().subtract(g.Vec2.fromValues(this.getRadius(),-this.getRadius())),t,t)}getPointPosition(t,e=!0){let s=this.getCenter().squaredDistance(t.getPoint());return e||(s=g.Common.equals(s,0)),s>0?o:s<0?a:u}getLinePosition(t,e=!0){const s=t.getNormal(),i=(s[0]*this.getCenter().get("x")+s[1]*this.getCenter().get("y")+s[2])/Math.sqrt(s[0]*s[0]+s[1]*s[1]);return e||(i=g.Common.equals(i,0)),i>0?o:i<0?a:u}copy(t){this.setCenterWithVec2(t.getCenter().clone()),this.setRadius(t.getRadius())}clone(){return l.fromVec2(this.getCenter().clone(),this.getRadius())}toString(){return`[CircleGeometry center (${this.getCenter().get("x")},${this.getCenter().get("y")}) radius ${this.radius}]`}}class c{_center=null;_majorRadius=0;_shortRadius=0;constructor(t,e,s,i){this._center=g.Vec2.fromValues(t,e),this.setMajorRadius(s),this.setShortRadius(i)}static fromVec2(t,e,s){return new c(t.get("x"),t.get("y"),e,s)}setCenter(t,e){this._center.set(t,e)}setCenterWithVec2(t){this._center.copy(t)}getCenter(){return this._center}setMajorRadius(t){this._majorRadius=t}getMarjorRadius(){return this._majorRadius}setShortRadius(t){this._shortRadius=t}getShortRadius(){return this._shortRadius}copy(t){this.setCenterWithVec2(t.getCenter()),this.setMajorRadius(t.getMarjorRadius()),this.setShortRadius(t.getShortRadius())}clone(){return c.fromVec2(this.getCenter(),this.getMarjorRadius(),this.getShortRadius())}toString(){return`EllipseGeometry center=(${this.getCenter().get("x")}, ${this.getCenter().get("y")}) majorRadius=${this.majorRadius} shortRadius=${this.shortRadius}`}}class d{_center=null;_radius=0;_startAngle=0;_endAngle=0;_isClockwise=!1;constructor(t,e,s,i,h,r=!1){this._center=g.Vec2.fromValues(t,e),this.setRadius(s),this.setStartAngle(i),this.setEndAngle(h),this.setClockWise(r)}static fromVec2(t,e,s,i,h=!1){return new d(t.get("x"),t.get("y"),e,s,i,h)}setClockWise(t){this._isClockwise=!!t}getClockWise(){return this._isClockwise}setStartAngle(t){this._startAngle=t}getStartAngle(){return this._startAngle}setEndAngle(t){this._endAngle=t}getEndAngle(){return this._endAngle}setRadius(t){this._radius=t}getRadius(){return this._radius}getCenter(){return this._center}setCenter(t,e){this.center.set(t,e)}setCenterWithVec2(t){this.center.copy(t)}copy(t){this.setCenterWithVec2(t.getCenter()),this.setRadius(t.getRadius()),this.setStartAngle(t.getStartAngle()),this.setEndAngle(t.getEndAngle()),this.setClockWise(t.getClockWise())}clone(){return d.fromVec2(this.getRadius(),this.getStartAngle(),this.getEndAngle(),this.getClockWise())}toString(){return`SectorGeometry center=(${this.getCenter().get("x")}, ${this.getCenter().get("y")}) radius=${this.getRadius()} startAngle=${this.getStartAngle()} endAngle=${this.getEndAngle()}`}}class _{_center=null;_innerRadius=0;_outerRadius=0;constructor(t,e,s,i){this._center=g.Vec2.fromValues(t,e),this.setInnerRadius(s),this.setOuterRadius(i)}static fromVec2(t,e,s){return new _(t.get("x"),t.get("y"),e,s)}setInnerRadius(t){this._innerRadius=t}setOuterRadius(t){this._outerRadius=t}getInnerRadius(){return this._innerRadius}getOuterRadius(){return this._outerRadius}getCenter(){return this._center}setCenter(t,e){this._center.set(t,e)}setCenterWithVec2(t){this._center.copy(t)}copy(t){this.setCenterWithVec2(t.getCenter()),this.setInnerRadius(t.getInnerRadius()),this.setOuterRadius(t.getOuterRadius())}clone(){return _.fromVec2(this.getCenter(),this.getInnerRadius(),this.getOuterRadius())}toString(){return`[RingGeometry center=${this.getCenter().toString()} innerRadius=${this.getInnerRadius()} outerRadius=${this.getOuterRadius()}`}}let m=1e9;class y{direction="inherit";fillStyle="#000";font="10px sans-serif";fontKerning="auto";fontStretch="normal";fontVariantCaps="normal";globalAlpha=1;globalCompositeOperation="source-over";imageSmoothingEnabled=!0;imageSmoothingQuality="low";letterSpacing="0px";lineCap="butt";lineJoin="miter";lineWidth=1;miterLimit=10;shadowBlur=0;shadowColor="rgba(0, 0, 0, 0)";shadowOffsetX=0;shadowOffsetY=0;strokeStyle="#000";textAlign="start";textBaseline="alphabetic";textRendering="auto";wordSpacing="0px";type="";id="";geom=null;constructor(t,e){this.type=t,this.setId(e)}getType(){return this.type}getId(){return this.id}getGeomerty(){return this.geom}setId(t){this.id=t||function(){m++;const t=m.toString(16).replace(/.{4}/g,(t=>t+"_"));return"_"===t[t.length-1]?t.slice(0,-1):t}()}render(t){}toString(){return`${this.getType()}Graphics geomerty=${this.getGeomerty().toString()}`}}class f extends y{constructor(t,e,s,i){super("Circle",i),this.setGeomerty(t,e,s)}static fromVec2(t,e,s){return new f(t.get("x"),t.get("y"),e,s)}setGeomerty(t,e,s){this.geom=new l(t,e,s)}setGeomertyWithVec2(t,e){this.geom=l.fromVec2(t,e)}render(t){console.log(t)}}t.CircleGeometry=l,t.CircleGraphics=f,t.Container=e,t.EllipseGeometry=c,t.PointGeometry=r,t.RectGeometry=n,t.RingGeometry=_,t.SectorGeometry=d,t.default=class{_element=null;_context=null;_containers={};_containerNames=[];_defaultContainer=null;_width=0;_height=0;constructor(t,s="default"){if("string"==typeof t){if(this._element=document.getElementById(t),!this._element)throw Error("Unknown attribute id")}else{if(!t||"CANVAS"!==t.nodeName)throw Error("unknown element");this._element=t}this._context=this._element.getContext("2d"),this.setSize(this.getElement().clientWidth,this.getElement().clientHeight),this._defaultContainer=new e(s),this.addContainer(this._defaultContainer)}setSize(t=0,e=0){this._width=t,this._height=e,this.getElement().width=this._width,this.getElement().height=this._height,this.clearScreen()}getSize(){return[this._width,this._height]}getElement(){return this._element}getContext(){return this._context}addContainer(t){if(!(t instanceof e))throw Error("unknown container");this._containerNames.includes(t.getName())?console.warn("exist container"):(t.setSort(++s),this._containers[t.getName()]=t,this._containerNames.push(t.getName()))}getContainer(t){return this._containerNames.includes(t)?this._containers[t]:this._defaultContainer}removeContainer(t){this._containerNames.includes(t)&&(this._containerNames=this._containerNames.filter((e=>e!==t)),delete this._containerNames[t])}setDefaultContainer(t){this._containerNames.includes(t)?this._defaultContainer=this._containers[t]:console.warn("set default container error [nonexistent container name]")}addGraphics(t,e){this.getContainer(e).addGraphics(t)}removeGraphics(t,e){this.getContainer(e).removeGraphics(t)}clearGraphics(t){this.getContainer(t).clearGraphics()}clearScreen(){this.getContext().clearRect(0,0,this._width,this._height)}render(){for(let t of this._containerNames)this._containers[t].render(this.getContext())}toString(){return"Stage"}},Object.defineProperty(t,"__esModule",{value:!0})}));
